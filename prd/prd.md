# 懂剪 PRD v1.0

## 产品名
**懂剪**

## 副标题
**懂流量，懂用户，更懂你**

## 产品类型
AI智能剪辑与内容创作平台

## 核心定位
重新定义视频剪辑，让 AI 成为“片场里的剪辑制片人”，从吸引用户，关联热点，情绪共鸣，节奏卡点，替用户完成所有的剪辑判断与执行，剪到点上，一键爆款成片。

---

# 1. 产品愿景与背景

## 1.1 行业痛点

当前主流视频剪辑工具（剪映 / PR / AE / DaVinci Resolve）主要解决的是：
- 怎么剪得更方便
- 怎么把素材拼在一起
- 怎么让画面更好看
- 素材哪里找，怎么融合进视频
- 剪辑工具各有优缺点，要学的多，用的累

但短视频创作的核心难点已经转移为：
- 剪什么内容才有流量
- 什么时候该快，什么时候该停
- 哪些点能引发共鸣
- 如何快速跟上热点

**真正稀缺的是“剪辑判断力”，而不是操作能力。**

---

## 1.2 产品愿景
打造全球领先的 AI 创作大脑，多模态理解，让每一位创作者都能拥有顶级剪辑导演的“判断力”。

我们的目标是实现从“工具辅助”向“智能决策”的范式转移：
- **从“手动拼凑”进化为“意图理解”**：AI 不再只是被动执行指令，而是能够理解素材的情绪、节奏与流量属性，主动给出剪辑最优解。
- **平民化专业表达**：消除专业剪辑软件的学习曲线与审美门槛，让个体创作者具备工业级的视频产出能力。
- **实时流量驱动创作**：建立内容与算法的闭环，让视频创作能够实时响应热点趋势，让“剪得好”与“能爆火”划上等号。

## 1.3 产品核心功能

### 1.3.1 工业级素材预处理（AI Pre-processing）
针对用户上传的原始素材（视频、图片、文案），通过 AI 技术进行自动化“洗料”，解决素材质量与版权合规问题：
- **智能去水印与字幕重构**：利用 AI Inpainting 技术无损擦除原生水印、Logo 及硬字幕，并支持一键提取/重写文案。
- **人物替换与数字人分身**：支持视频中人物角色的 AI 换脸、服装替换或一键转化为数字人，解决出镜难与肖像权问题。
- **智能构图与画幅重组**：基于视觉显著性检测（Saliency Detection），自动识别画面主体，实现横转竖、智能裁剪及动态跟焦。

### 1.3.2 深度内容理解与意图识别（Content Intelligence）
AI 充当“导演大脑”，对零散素材进行多模态语义分析：
- **全维度素材打标**：自动识别视频中的情绪基调、节奏点、关键动作及场景信息，建立结构化素材库。
- **文案/脚本自动生成**：若用户无文案，AI 可根据上传图片或视频片段，结合实时热点趋势，自动撰写具备“爆款基因”的脚本。

### 1.3.3 智能素材补全与云端检索（Asset Sourcing）
解决“素材荒”问题，实现从“有什么剪什么”到“要什么有什么”的转变：
- **生成式补全（AIGC）**：通过文生视频、图生视频技术，针对脚本缺失环节自动生成高质量转场或空镜素材。
- **全网版权素材匹配**：基于语义理解，自动从云端素材库中检索匹配的高清视频、BGM、音效及特效贴纸。

### 1.3.4 流量驱动的一键成片（One-click Production）
- **情绪卡点剪辑**：AI 自动匹配音乐节拍与画面情绪起伏，实现导演级的剪辑节奏控制。
- **爆款策略注入**：实时接入短视频平台热点算法，自动调整视频黄金 3 秒开头、互动槽点及结尾引导，确保成片即具备传播力。

### 1.3.5 个性化资产库与意图匹配（Personalized Assets & Retrieval）
构建“用户私有云 + 平台公共库”的双层素材体系，实现素材的精准推荐与智能召唤：
- **用户偏好记忆（User Preference Profile）**：自动保存并优先调用用户常用的片头片尾、字幕样式、转场特效及调色滤镜，形成品牌化视觉一致性。
- **多维度结构化素材库**：建立涵盖音频、视频、花字、动效、BGM、贴纸的庞大资源池，并基于“情绪（如：欢快、悬疑）”、“行业（如：美妆、探店）”进行深度标签化管理。
- **意图驱动的素材召唤**：当用户上传基础素材后，AI 自动解析语义意图，从库中匹配最契合的辅助素材（如：根据“深夜食堂”文案自动匹配治愈系 BGM 与烟火气空镜）。

### 1.3.6 差异化场景剪辑引导（Guided Production Workflows）
针对用户持有素材的不同情况（视频、图片、文字、零素材），提供四种定制化引导路径。

#### A. 图片素材成片（Image-to-Video Workflow）
适用于拥有高质量摄影作品、产品图或表情包，希望将其转化为动态短视频的场景。
1.  **素材导入与编排**：引导上传主素材（Base Material）与辅助素材（Auxiliary Material），支持拖拽排序，系统自动在衔接处预设智能转场。
2.  **智能拆条与精选（AI Culling）**：AI 自动识别画面内容并进行语义分割，提取高光片段，剔除模糊、晃动等低价值部分，用户可一键回退被剔除的片段。
3.  **多模态字幕与标题推荐**：
    - **人声识别**：自动转录语音并对齐时间轴。
    - **内容补全**：针对无声片段，根据画面理解推荐描述性字幕，并结合全网热点关键词生成爆款标题。
4.  **节奏大师（Music Beat-sync）**：基于视频情绪智能配乐，自动调整视频素材的播放速（加速/慢动作）以精准匹配音乐节拍点。
5.  **视觉特效渲染**：针对视频前 3 秒及关键节点，自动添加吸睛标题动画、核心关键词高亮及情绪增强音效。
6.  **音画口型同步（AV-Sync & Lip-sync）**：系统级校准视频、音频与字幕的对齐精度，确保数字人或人声解说与口型、动作精准一致。
7.  **专业级微调与导出**：提供标准多轨道时间轴界面，支持用户进行像素级微调，并支持导出不同分辨率、帧率的社交媒体优化格式。

#### B. 图片素材成片（Image-to-Video Workflow）
适用于拥有高质量摄影作品、产品图或表情包，希望将其转化为动态短视频的场景。
1.  **多模态素材解析**：AI 识别图片主体（人物、风景、产品）、构图风格及色彩基调。
2.  **动态化处理（AI Animation）**：
    - **生成式动态**：利用 Image-to-Video 技术（如 SVD, AnimateDiff）为静态图片注入自然动作（如头发飘动、水流、云动）。
    - **运镜模拟**：对无法生成的图片应用智能 Ken Burns 效果，模拟专业摄像机的推拉摇移。
3.  **叙事脚本构建**：根据图片逻辑（如时间顺序、逻辑递进）自动生成旁白文案，并匹配对应的转场动效。
4.  **氛围渲染**：自动匹配环境音效（Foley）与背景音乐，增强图片的沉浸感。

#### C. 文字/脚本成片（Text-to-Video Workflow）
适用于已有成熟文案、小说片段或新闻稿，需要快速视觉化的场景。
1.  **语义拆解与分镜（Script-to-Storyboard）**：AI 深度理解文案逻辑，自动将其拆分为标准的分镜脚本（Storyboard）。
2.  **智能素材匹配与召唤**：
    - **版权库检索**：基于分镜关键词，从云端库自动匹配最契合的视频素材。
    - **AIGC 补缺**：对于库中缺失的特定场景，自动触发文生图/文生视频引擎进行定制化生成。
3.  **情感化配音（TTS）**：提供多语种、多情绪（如：激昂、治愈、悬疑）的 AI 语音克隆与合成，并自动对齐画面节奏。
4.  **视觉包装自动化**：根据文案主题自动生成匹配的标题花字、进度条及片尾引导。

#### D. 零素材成片（Zero-Asset/Trend-Driven Workflow）
适用于仅有创作冲动或流量目标，但无任何原始素材的场景。
1.  **热点意图探测**：用户输入关键词或选择当前平台热点榜单（如：#职场吐槽、#萌宠日常）。
2.  **爆款脚本生成**：AI 结合实时流量算法，自动撰写具备高互动率、高完播率潜力的脚本。
3.  **全链路 AIGC 生成**：
    - **数字人出镜**：自动生成符合脚本人设的 AI 数字人进行口播。
    - **全场景合成**：从背景、BGM 到插片素材，全部由 AI 实时生成或从热点素材库中调用。
4.  **一键品牌化**：自动植入用户预设的个人 IP 标识（Logo、固定片头、特定滤镜），确保内容的辨识度。


### 五、 技术方案与核心架构要求

为确保极致的视频编辑体验与高性能导出，本项目采用基于浏览器端的“实时渲染+硬件加速”方案。

#### 1. 核心技术栈
-   **渲染引擎 (Canvas 2D / WebGL)**：
    -   **高级花字系统**：利用 `Canvas 2D` 的 `fillText`、`strokeText` 及 `shadow` 属性实现多层描边、渐变、发光等动态标题效果。
    -   **实时滤镜**：通过 `WebGL` 编写 GLSL Shader，实现胶片感、噪点、转场特效的像素级处理。
-   **编码与解码 (WebCodecs API)**：
    -   **硬件加速**：直接调用底层的 `VideoEncoder` 与 `VideoDecoder`，绕过 CPU 软解，实现 4K 视频的秒级预览与高速导出。
    -   **低延迟渲染**：利用 `VideoFrame` 对象进行零拷贝（Zero-copy）渲染，极大降低内存占用。
-   **多媒体处理 (WASM + FFmpeg)**：
    -   **封装与混流**：部署 `ffmpeg.wasm` (WebAssembly) 负责最终的容器封装（Muxing），如将编码后的 H.264 流与 AAC 音频流合成为 MP4。
    -   **音频处理**：利用 Web Audio API 进行实时混音，结合 WASM 版本的音频库处理降噪与变声。
-   **并发架构 (Web Workers + OffscreenCanvas)**：
    -   **UI 零卡顿**：将渲染逻辑与编码逻辑完全移至 `Web Worker` 中执行。
    -   **离屏渲染**：使用 `OffscreenCanvas` 在后台线程生成视频帧，确保导出过程中主线程 UI 交互依然丝滑。

#### 2. 前端合成预览流程
1.  **时间轴调度**：基于 `requestAnimationFrame` 自研高性能时间轴驱动器，精确控制每一帧的图层叠加顺序与动效。
2.  **分级预览策略**：
    -   **编辑态**：采用低分辨率缓存帧预览，确保交互实时响应。
    -   **预览态**：动态调用 WebCodecs 解码原始素材，应用 Canvas 实时特效，呈现最终画质。

#### 3. 导出技术指标
-   **本地化导出**：所有合成与编码过程均在用户本地浏览器完成，无需上传素材至服务器，保护隐私并节省带宽。
-   **流式写入 (FileSystem Writable File Stream)**：支持将编码后的数据流式写入本地硬盘，避免因视频过大导致浏览器内存溢出（OOM）。
-   **断点续导**：支持导出任务的状态持久化，在复杂任务中提供进度恢复能力。

#### 4. 性能优化最佳实践
-   **内存管理**：严格执行 `VideoFrame.close()` 及时释放 GPU 显存，防止长视频合成导致的浏览器崩溃。
-   **预加载机制**：基于 LRU 算法预加载时间轴附近的素材片段，消除播放卡顿。
-   **多线程并行**：根据 CPU 核心数开启多个 Worker 并行处理视频分片，最后通过 FFmpeg 进行无损拼接。
