# Change: 构建视频剪辑素材库与模版库系统

## Why

当前 AutoCut 的素材库功能较为基础，仅支持简单的文件上传和展示。为实现真正的「一键成片」体验，需要构建：

1. **完整的素材分类体系** - 支持视频、图片、音乐、音效、字体、花字、表情、特效、转场等多类型素材
2. **参数化模版系统** - 用户通过调整参数快速生成定制素材，特别是花字模版
3. **收藏与检索系统** - 多维度标签、收藏夹、智能搜索
4. **AI 能力集成** - AI 召唤网络素材、AI 生成模版

## What Changes

### 1. 数据模型扩展

- 新增 `Template` 模型：存储模版元数据和参数定义
- 新增 `UserFavorite` 模型：用户收藏关联
- 新增 `StickerPack` / `Sticker` 模型：表情包管理
- 扩展 `Media` 模型：新增 `source` 字段区分来源

### 2. 素材库增强

- 新增「我的收藏」Tab
- 实现首帧封面截取
- 实现悬浮预览（视频自动播放、音频波形预览）
- 实现点击放大预览弹窗
- 新增表情包导入功能
- 新增 AI 素材 Tab（视频/图片类型）

### 3. 模版库系统

- **视频模版**：支持人物替换、背景替换、变速曲线
- **图片模版**：支持人物替换、背景替换
- **花字模版**：完整的参数化系统（整体参数 + 逐字参数）
- 新增「灵感创意」Tab（花字类型）
- 模版预览与参数编辑器
- 模版渲染引擎

### 4. 花字渲染引擎（核心）

- Canvas + WebGL 渲染器
- 支持 20+ 入场动画
- 支持 10+ 循环动画
- 支持 10+ 退场动画
- 逐字动画控制
- 装饰元素渲染
- 导出为视频/序列帧

### 5. 标签与检索系统

- 花字用途标签：标题、章节步骤、操作指引、强调特写、人物介绍
- 多维度交叉筛选
- 智能搜索

### 6. AI 能力集成

- AI 召唤素材：根据关键词爬取网络素材
- AI 生成模版：调用 Google Veo/Imagen 生成
- 花字灵感创意：交互式 AI 生成花字脚本

## Impact

- **Affected specs**: 
  - `asset-library`（新增）
  - `template-system`（新增）
  - `fancy-text-engine`（新增）
  - `ai-integration`（新增）

- **Affected code**:
  - `prisma/schema.prisma` - 数据模型
  - `app/library/page.tsx` - 素材库页面重构
  - `app/templates/page.tsx` - 模版库页面重构
  - `components/` - 新增多个核心组件
  - `lib/` - 新增渲染引擎和工具函数

## 优先级规划

| 优先级 | 模块 | 预计工作量 |
|--------|------|----------|
| P0 | 收藏功能 | 2h |
| P0 | 花字模版参数化系统 | 4h |
| P1 | 花字渲染引擎 | 6h |
| P1 | 首帧封面 + 悬浮预览 | 3h |
| P1 | 表情包管理 | 2h |
| P2 | 模版编辑器 | 4h |
| P2 | 灵感创意功能 | 3h |
| P3 | AI 素材召唤 | 4h |
| P3 | AI 模版生成 | 4h |






